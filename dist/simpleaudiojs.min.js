!function(){function e(e){for(var a={},i=document.getElementsByTagName("audio"),s=0,r=i.length;s<r;s++)a[s]=t(i[s],e);return a}function t(e,t){return e=a(e,t),e=new SimpleAudioJSItem(e,t),i(e,t),e}function a(e,t){var a=document.createElement("div"),i=e.cloneNode(!0);return a.setAttribute("class",t.class),a.appendChild(i),a.innerHTML+=t.html,e.parentNode.replaceChild(a,e),a.getElementsByTagName("audio")[0]}function i(e,t){var a=e.wrapper.querySelector("[data-playpause]");a&&a.addEventListener("click",function(t){e.playPause.call(e)});var i=e.wrapper.querySelector("[data-play]");i&&i.addEventListener("click",function(t){e.play.call(e)});var s=e.wrapper.querySelector("[data-pause]");s&&s.addEventListener("click",function(t){e.pause.call(e)});var r=e.wrapper.querySelector("[data-stop]");r&&r.addEventListener("click",function(t){e.stop.call(e)});var n=e.wrapper.querySelector("[data-track]");n&&(n.addEventListener("mouseup",function(t){e.jumpTo.call(e,t)}),n.addEventListener("mousedown",function(t){e.trackScroll.call(e,t)})),e.element.addEventListener("timeupdate",function(t){e.playUpdate.call(e)}),e.element.addEventListener("loadedmetadata",function(t){e.loadedMeta.call(e)}),e.element.addEventListener("play",function(t){e.playHandler.call(e)}),e.element.addEventListener("pause",function(t){e.pauseHandler.call(e)}),e.wrapper.addEventListener("dragstart",function(e){return!1}),e.element.addEventListener("ended",function(t){e.ended.call(e)})}this.SimpleAudioJS=function(){this.instances={},this.params={class:"audio-player",html:'<div class="audio-player__buttons">\t<div class="audio-player__playpause" data-playpause></div>\t<div class="audio-player__play" data-play></div>\t<div class="audio-player__pause" data-pause></div>\t<div class="audio-player__stop" data-stop></div></div><div class="audio-player__track" data-track>\t<div class="audio-player__track-progress" data-progress-track></div>\t<div class="audio-player__track-spin" data-progress-spin></div></div><div class="audio-player__times">\t<div class="audio-player__time-progress" data-progress-time>00:00</div>\t/\t<div class="audio-player__time-leave" data-leave-time>00:00</div>\t/\t<div class="audio-player__time-total" data-total-time>00:00</div></div>',stopOther:!0,playNext:!1},arguments[0]&&"object"==typeof arguments[0]&&(this.params=s.extendDefaults(this.params,arguments[0])),this.instances=e.call(this,this.params),this.current=0},SimpleAudioJSItem=function(e,t){var a=e.parentNode;this.element=e,this.wrapper=a,this.time={duration:0,current:0,leave:0},this.progressTime=a.querySelector("[data-progress-time]"),this.leaveTime=a.querySelector("[data-leave-time]"),this.totalTime=a.querySelector("[data-total-time]"),this.track=a.querySelector("[data-track]"),this.progressTrack=a.querySelector("[data-progress-track]"),this.progressSpin=a.querySelector("[data-progress-spin]"),this.stopOther=t.stopOther,this.playNext=t.playNext},SimpleAudioJSItem.prototype={playPause:function(){this.element.paused?this.element.play():this.element.pause()},play:function(){this.element.play()},pause:function(){this.element.pause()},stop:function(){this.element.pause(),this.element.currentTime=0,this.pauseHandler()},ended:function(){if(this.playNext)for(var e=document.getElementsByTagName("audio"),t=0,a=e.length;t<a;t++)e[t]==this.element&&e[t+1]&&(this.stop(),e[t+1].play())},playHandler:function(){this.pauseOther(),s.addClass(this.wrapper,"is-played"),s.removeClass(this.wrapper,"is-paused"),s.removeClass(this.wrapper,"is-stoped")},pauseHandler:function(){this.element.currentTime>0?(s.addClass(this.wrapper,"is-paused"),s.removeClass(this.wrapper,"is-played"),s.removeClass(this.wrapper,"is-stoped")):(s.addClass(this.wrapper,"is-stoped"),s.removeClass(this.wrapper,"is-played"),s.removeClass(this.wrapper,"is-paused"))},playUpdate:function(){this.time.current=Math.round(this.element.currentTime),this.time.leave=this.time.duration-this.time.current;var e=Math.round(this.time.current/this.time.duration*1e4)/100;this.progressTime&&(this.progressTime.innerHTML=this.timeToHtml(this.time.current)),this.leaveTime&&(this.leaveTime.innerHTML=this.timeToHtml(this.time.leave)),this.progressTrack&&(this.progressTrack.style.width=e+"%"),this.progressSpin&&(this.progressSpin.style.left=e+"%")},loadedMeta:function(){this.time.duration=Math.round(this.element.duration),this.time.current=Math.round(this.element.currentTime),this.time.leave=this.time.duration-this.time.current,this.totalTime&&(this.totalTime.innerHTML=this.timeToHtml(this.time.duration)),this.leaveTime&&(this.leaveTime.innerHTML=this.timeToHtml(this.time.duration))},jumpTo:function(e){var t=Math.round(e.clientX+pageXOffset),a=parseInt(this.track.clientWidth),i=Math.round(this.track.getBoundingClientRect().left),s=Math.round(i+a);if(i<=t&&t<=s){var r=(t-i)/a;this.element.currentTime=this.element.duration*r}},trackScroll:function(e){function t(e){var t=(Math.round(e.clientX+pageXOffset)-i)/a;t<=0&&(t=0),t>=100&&(t=100),s.element.currentTime=s.element.duration*t}var a=(Math.round(e.clientX+pageXOffset),parseInt(this.track.clientWidth)),i=Math.round(this.track.getBoundingClientRect().left),s=(Math.round(i+a),this);document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",t),document.onmouseup=function(){document.onselectstart=null,document.ondragstart=null,document.removeEventListener("mousemove",t)}},pauseOther:function(){if(this.stopOther)for(var e=document.getElementsByTagName("audio"),t=0,a=e.length;t<a;t++)e[t]!=this.element&&e[t].pause()},timeToHtml:function(e){var t=Math.floor(e/60),a=Math.floor(e%60);return(t<10?"0":"")+t+":"+(a<10?"0":"")+a}};var s={extendDefaults:function(e,t){var a;for(a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},addClass:function(e,t){s.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(s.hasClass(e,t)){var a=new RegExp(t,"g");e.className=e.className.replace(a,""),e.className=e.className.replace(/\ {2,}/g," ")}},hasClass:function(e,t){var a=new RegExp(t,"g");return!!e.className.match(a)}}}();